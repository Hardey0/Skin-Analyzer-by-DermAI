<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DermAI - Skin Disease Detection</title>
    <link rel="icon" type="image/png" href="der.png">
   
<link rel="stylesheet" href="index.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
   
</head>

<body>
    
    <!-- Animated Background -->
    <div class="bg-animation">
        <div class="floating-shapes">
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="shape"></div>
        </div>
    </div>

    <!-- Header -->
    <div class="header">
        <div class="logo">
            <i class="fas fa-microscope"></i> DermAI
        </div>
        <div class="tagline">AI-Powered Skin Disease Detection</div>
        <div class="subtitle">
            Get instant, accurate skin condition analysis using advanced machine learning technology.
            Upload a photo and receive professional-grade insights in seconds.
        </div>
    </div>

    <div class="container">
        <!-- Upload Section -->
        <div class="upload-section">
            <h2 class="upload-title">
                <i class="fas fa-upload"></i> Upload Your Image
            </h2>
          <form class="upload-form" id="uploadForm">
    <div class="file-upload-container">
        <input type="file" id="fileInput" name="image" class="file-input" accept="image/*" required>
        <label for="fileInput" class="file-upload-btn" id="uploadBtn">
            <i class="fas fa-cloud-upload-alt upload-icon"></i>
            <div class="upload-text">
                <strong>Choose Image</strong>
                <div class="upload-hint">or drag and drop here</div>
            </div>
        </label>
        <div class="file-name" id="fileName"></div>
    </div>
    <button type="submit" class="diagnose-btn" id="diagnoseBtn">
        <i class="fas fa-search"></i> Diagnose Now
    </button>
    <div id="predictionResult" style="margin-top: 20px; font-weight: bold; color: #333;"></div>
  </form>

        </div>

        <!-- How It Works Section -->
        <div class="how-it-works">
            <h2 class="section-title">How It Works</h2>
            <div class="steps-container">
                <div class="step-card">
                    <div class="step-icon">
                        <i class="fas fa-camera"></i>
                    </div>
                    <div class="step-title">1. Upload Image</div>
                    <div class="step-description">
                        Take a clear photo of the affected skin area or upload an existing image from your device.
                    </div>
                </div>
                <div class="step-card">
                    <div class="step-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="step-title">2. AI Analysis</div>
                    <div class="step-description">
                        Our advanced machine learning model analyzes the image using deep learning algorithms.
                    </div>
                </div>
                <div class="step-card">
                    <div class="step-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="step-title">3. Get Results</div>
                    <div class="step-description">
                        Receive detailed analysis with confidence scores and recommendations for next steps.
                    </div>
                </div>
            </div>
        </div>

        <!-- Features Section -->
        <div class="features">
            <h2 class="section-title">Why Choose DermAI?</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <div class="feature-title">Lightning Fast</div>
                    <div class="feature-description">
                        Get results in seconds with our optimized AI processing pipeline.
                    </div>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="feature-title">Secure & Private</div>
                    <div class="feature-description">
                        Your images are processed securely and never stored on our servers.
                    </div>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-medal"></i>
                    </div>
                    <div class="feature-title">High Accuracy</div>
                    <div class="feature-description">
                        Trained on thousands of dermatological images for maximum precision.
                    </div>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <div class="feature-title">Mobile Ready</div>
                    <div class="feature-description">
                        Works perfectly on all devices - desktop, tablet, and mobile.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">Analyzing Your Image...</div>
            <div class="loading-subtext">Our AI is examining the skin condition</div>
        </div>
    </div>

    <script>
        // File upload handling
        const fileInput = document.getElementById('fileInput');
        const uploadBtn = document.getElementById('uploadBtn');
        const fileName = document.getElementById('fileName');
        const uploadForm = document.getElementById('uploadForm');
        const loadingOverlay = document.getElementById('loadingOverlay');
        const diagnoseBtn = document.getElementById('diagnoseBtn');

        // File input change handler
        fileInput.addEventListener('change', function (e) {
            const file = e.target.files[0];
            if (file) {
                fileName.textContent = `Selected: ${file.name}`;
                fileName.style.display = 'block';
                uploadBtn.classList.add('pulse');

                // Show preview if it's an image
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        uploadBtn.style.backgroundImage = `url(${e.target.result})`;
                        uploadBtn.style.backgroundSize = 'cover';
                        uploadBtn.style.backgroundPosition = 'center';
                        uploadBtn.innerHTML = '<div style="background: rgba(0,0,0,0.7); padding: 1rem; border-radius: 10px; color: white;"><i class="fas fa-check"></i> Image Selected</div>';
                    };
                    reader.readAsDataURL(file);
                }
            }
        });

        // Drag and drop functionality
        uploadBtn.addEventListener('dragover', function (e) {
            e.preventDefault();
            uploadBtn.style.borderColor = '#5a6fd8';
            uploadBtn.style.background = 'linear-gradient(135deg, #e8f0ff 0%, #d0e4ff 100%)';
        });

        uploadBtn.addEventListener('dragleave', function (e) {
            e.preventDefault();
            uploadBtn.style.borderColor = '#667eea';
            uploadBtn.style.background = 'linear-gradient(135deg, #f8f9ff 0%, #e8f0ff 100%)';
        });

        uploadBtn.addEventListener('drop', function (e) {
            e.preventDefault();
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                fileInput.files = files;
                fileInput.dispatchEvent(new Event('change'));
            }
            uploadBtn.style.borderColor = '#667eea';
            uploadBtn.style.background = 'linear-gradient(135deg, #f8f9ff 0%, #e8f0ff 100%)';
        });

        // Form submission with loading animation
// Form submission with loading animation
uploadForm.addEventListener('submit', function (e) {
    e.preventDefault();

    const file = fileInput.files[0];
    if (!file) {
        alert('Please select an image first!');
        return;
    }

    loadingOverlay.style.display = 'flex';

    const reader = new FileReader();
    reader.onloadend = async () => {
        const base64Image = reader.result.split(',')[1]; // Remove the prefix
        try {
            const response = await fetch("https://hardey067-dermai-skin-detector.hf.space/run/predict", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ data: [`data:image/jpeg;base64,${base64Image}`] })
            });

            const result = await response.json();

            // Handle data gracefully
            const prediction = result.prediction || result.data?.[0] || "No prediction returned";
            const image_url = result.image_url || "default_image.jpg";
            const heatmap_url = result.heatmap_url || "default_heatmap.jpg";
            const alt_1 = result.alt_1 || "Alternative 1";
            const alt_2 = result.alt_2 || "Alternative 2";

            // Save results to localStorage
            localStorage.setItem("prediction", prediction);
            localStorage.setItem("image_url", image_url);
            localStorage.setItem("heatmap_url", heatmap_url);
            localStorage.setItem("alt_1", alt_1);
            localStorage.setItem("alt_2", alt_2);

            // Navigate to result page
            window.location.href = "result.html";
        } catch (error) {
            alert("Error: " + error.message);
        } finally {
            loadingOverlay.style.display = 'none';
        }
    };

    reader.readAsDataURL(file);
});


        // Add some interactive animations
        document.addEventListener('DOMContentLoaded', function () {
            // Animate cards on scroll
            const cards = document.querySelectorAll('.step-card, .feature-card');

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animation = 'fadeInUp 0.6s ease forwards';
                    }
                });
            });

            cards.forEach(card => {
                observer.observe(card);
            });

            // Add CSS for fadeInUp animation
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeInUp {
                    from {
                        opacity: 0;
                        transform: translateY(30px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
            `;
            document.head.appendChild(style);
        });

        // Add some particle effects
        function createParticle() {
            const particle = document.createElement('div');
            particle.style.position = 'fixed';
            particle.style.width = '4px';
            particle.style.height = '4px';
            particle.style.background = 'rgba(255, 255, 255, 0.8)';
            particle.style.borderRadius = '50%';
            particle.style.pointerEvents = 'none';
            particle.style.zIndex = '1';
            particle.style.left = Math.random() * window.innerWidth + 'px';
            particle.style.top = '-10px';
            particle.style.animation = 'fall 3s linear forwards';

            document.body.appendChild(particle);

            setTimeout(() => {
                particle.remove();
            }, 3000);
        }

        // Create falling particles occasionally
        setInterval(createParticle, 2000);

        // Add CSS for falling animation
        const particleStyle = document.createElement('style');
        particleStyle.textContent = `
            @keyframes fall {
                to {
                    transform: translateY(100vh);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(particleStyle);
    </script>
</body>

</html>